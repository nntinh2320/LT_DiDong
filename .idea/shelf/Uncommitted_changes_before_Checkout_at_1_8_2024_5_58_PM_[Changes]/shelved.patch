Index: app/src/main/java/com/tutlane/afinal/CartFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tutlane.afinal;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.BaseAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\nimport android.window.SplashScreen;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.google.android.material.snackbar.BaseTransientBottomBar;\r\nimport com.google.android.material.snackbar.Snackbar;\r\n\r\nimport java.util.List;\r\n\r\npublic class CartFragment extends Fragment {\r\n    public CartFragment(){\r\n\r\n    }\r\n\r\n    private MediMartDbHelper db;\r\n    private SharedPreferences sp;\r\n    private ListView lv;\r\n    private TextView tv,tv5,tv6;\r\n    private Button b;\r\n    private CustomAdapter adp;\r\n    private List<CartItem> list;\r\n    private int qty;\r\n    @Override\r\n    public View onCreateView(final LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){\r\n        db=new MediMartDbHelper(getContext());\r\n        getActivity().setTitle(\"Your Cart\");\r\n        sp=getActivity().getSharedPreferences(\"users\", Context.MODE_PRIVATE);\r\n        View vv=inflater.inflate(R.layout.fragment_cart,container,false);\r\n        lv=vv.findViewById(R.id.lvcart);\r\n        tv=vv.findViewById(R.id.textView9);\r\n        tv5=vv.findViewById(R.id.tvgsts);\r\n        tv6=vv.findViewById(R.id.tvnet);\r\n        b=vv.findViewById(R.id.fabcheckout);\r\n        b.setVisibility(View.INVISIBLE);\r\n        list=getList();\r\n        lv.setOnItemClickListener((parent, view, position, id) -> {\r\n            final String pname=list.get(position).getProduct().getPname();\r\n            qty=list.get(position).getQty();\r\n            final String userid=sp.getString(\"userid\",\"guest\");\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(getContext());\r\n            View vv = getLayoutInflater().inflate(R.layout.cart_item,null,false);\r\n            TextView tv1=vv.findViewById(R.id.tvcpname);\r\n            final TextView et1=vv.findViewById(R.id.etcqty);\r\n            Button b1=vv.findViewById(R.id.bqminus);\r\n            Button b2=vv.findViewById(R.id.bqadd);\r\n            b2.setOnClickListener((v)->{\r\n                qty=Integer.parseInt(et1.getText().toString())+1;\r\n                et1.setText(\"\"+(qty));\r\n            });\r\n            b1.setOnClickListener((v)->{\r\n                qty=Integer.parseInt(et1.getText().toString());\r\n                if(qty==1){\r\n                    Snackbar.make(v,\"Minimum Quantity 1\", BaseTransientBottomBar.LENGTH_LONG).show();\r\n                }\r\n                else{\r\n                    qty--;\r\n                    et1.setText(\"\"+(qty));\r\n                }\r\n            });\r\n            tv1.setText(pname);\r\n            et1.setText(\"\"+qty);\r\n            builder.setView(vv);\r\n            builder.setTitle(\"Cart Item Update\");\r\n            builder.setNegativeButton(\"Update Quantity\",(dialog, which) -> {\r\n               db.updatecart(pname,userid,qty);\r\n               lv.setAdapter(new CustomAdapter(getList(),inflater));\r\n               calc();\r\n            });\r\n            builder.setPositiveButton(\"Delete Now\",(dialog, which) -> {\r\n                Toast.makeText(getContext(),\"Product Removed\",Toast.LENGTH_SHORT).show();\r\n                db.deletefromcart(pname,userid,qty);\r\n                lv.setAdapter(new CustomAdapter(getList(),inflater));\r\n                calc();\r\n            });\r\n            builder.show();\r\n        });\r\n        if(list.size()==0){\r\n            MediMartUtils.loadwithoutHistoryFragment(getActivity(),new EmptyCartFragment());\r\n        }\r\n        else{\r\n            adp=new CustomAdapter(list,inflater);\r\n            lv.setAdapter(adp);\r\n            calc();\r\n            b.setVisibility(View.VISIBLE);\r\n            b.setOnClickListener(v -> {\r\n                MediMartUtils.loadFragment(getActivity(),new PaymentFragment());\r\n            });\r\n        }\r\n        return vv;\r\n    }\r\n\r\n    private void calc(){\r\n        float amount=totalBill();\r\n        tv.setText(String.format(\"%.2f\",amount));\r\n        float gst=amount*.10f;\r\n        float net=amount+gst;\r\n        tv5.setText(String.format(\"%.2f\",gst));\r\n        tv6.setText(String.format(\"%.2f\",net));\r\n    }\r\n    private class CustomAdapter extends BaseAdapter{\r\n        private List<CartItem> list;\r\n        private LayoutInflater inflater;\r\n        public CustomAdapter(List<CartItem> list, LayoutInflater inflater){\r\n            this.list=list;\r\n            this.inflater= inflater;\r\n        }\r\n        @Override\r\n        public int getCount(){return list.size();}\r\n        @Override\r\n        public Object getItem(int positon){return list.get(positon);}\r\n        @Override\r\n        public long getItemId(int position){return 0;}\r\n        @Override\r\n        public View getView(int position, View convertView, ViewGroup parent){\r\n            View vv=inflater.inflate(R.layout.cart_item_layout,parent,false);\r\n            TextView tv1=vv.findViewById(R.id.tvcpname);\r\n            TextView tv2=vv.findViewById(R.id.tvcprice);\r\n            TextView tv3=vv.findViewById(R.id.tvcqty);\r\n            TextView tv4=vv.findViewById(R.id.tvcart);\r\n\r\n            tv1.setText(list.get(position).getProduct().getPname());\r\n            float price=list.get(position).getProduct().getPrice();\r\n            int qty=list.get(position).getQty();\r\n            float amount=price*qty;\r\n            tv2.setText(String.format(\"%.2f\",price));\r\n            tv3.setText(String.valueOf(qty));\r\n            tv4.setText(String.format(\"%.2f\",amount));\r\n\r\n            if(position%2==0){\r\n                vv.setBackgroundResource(R.color.fav1);\r\n            }\r\n            else{\r\n                vv.setBackgroundResource(R.color.fav2);\r\n            }\r\n            return vv;\r\n        }\r\n\r\n    }\r\n    public List<CartItem> getList(){\r\n        String userid=sp.getString(\"userid\",\"guest\");\r\n        List<CartItem> list=null;\r\n        if(userid.equals(\"guest\")){\r\n            Toast.makeText(getContext(),\"Please Login First\",Toast.LENGTH_SHORT).show();\r\n        }\r\n        else{\r\n            Cursor c = db.getCartItems(userid);\r\n            list=new ArrayList<>();\r\n            while(c.moveToNext()){\r\n                String pname=c.getString(2);\r\n                Product product=findByName(pname);\r\n                int qty=c.getInt(3);\r\n                CartItem item=new CartItem(product,qty,userid);\r\n                list.add(item);\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n    private Product findByName(String pname){\r\n        List<Product> list= SplashScreen.plist;\r\n        for(Product p: list){\r\n            if(p.getPname().equals(pname)){\r\n                return p;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    public float toaalBill(){\r\n        List<CartItem> list=getList();\r\n        float total=0;\r\n        for(CartItem item:list){\r\n            total+=(item.getQty()*item.getProduct().getPrice());\r\n        }\r\n        return total;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/tutlane/afinal/CartFragment.java b/app/src/main/java/com/tutlane/afinal/CartFragment.java
--- a/app/src/main/java/com/tutlane/afinal/CartFragment.java	
+++ b/app/src/main/java/com/tutlane/afinal/CartFragment.java	
@@ -3,6 +3,7 @@
 import android.app.AlertDialog;
 import android.content.Context;
 import android.content.SharedPreferences;
+import android.database.Cursor;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -19,6 +20,7 @@
 import com.google.android.material.snackbar.BaseTransientBottomBar;
 import com.google.android.material.snackbar.Snackbar;
 
+import java.util.ArrayList;
 import java.util.List;
 
 public class CartFragment extends Fragment {
@@ -130,7 +132,7 @@
             TextView tv1=vv.findViewById(R.id.tvcpname);
             TextView tv2=vv.findViewById(R.id.tvcprice);
             TextView tv3=vv.findViewById(R.id.tvcqty);
-            TextView tv4=vv.findViewById(R.id.tvcart);
+            TextView tv4=vv.findViewById(R.id.tvcamt);
 
             tv1.setText(list.get(position).getProduct().getPname());
             float price=list.get(position).getProduct().getPrice();
Index: app/src/main/java/com/tutlane/afinal/OrderDetailFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.tutlane.afinal;\r\n\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.database.Cursor;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.BaseAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\npublic class OrderDetailFragment extends Fragment\r\n{\r\n    public OrderDetailFragment()\r\n    {}\r\n\r\n    private ListView lv;\r\n    private MediMartDbHelper db;\r\n    private TextView tv;\r\n    private LinearLayout ll;\r\n    private SharedPreferences sp;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View vv =inflater(R.layout.fragment_order_details,container,false);\r\n        lv=vv.findViewById(R.id.lvsub);\r\n        db=new MediMartDbHelper(getContext());\r\n        tv=vv.findViewById(R.id.textview30);\r\n        ll=vv.findViewById(R.id.linearLayout3);\r\n        sp=getActivity().getSharedPreferences(\"users\", Context.MODE_PRIVATE);\r\n        final  String orderid=getArguments().getString(\"orderid\");\r\n        tv.setText(\"Order Details of\"+orderid);\r\n        Cursor cx=db.getOrderDetails(orderid);\r\n        CustomAdapter adp=new CustomAdapter(cx);\r\n        String role =sp.getString (\"role\",\"no\");\r\n        cx.moveToFirst();\r\n        String status=cx.getString(6);\r\n        if(role.equals(\"admin\"))\r\n        {\r\n            Button b1=new Button(getContext())  ;\r\n            b1.setText(\"Confirm Order\");\r\n            b1.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                    ViewGroup.LayoutParams.WRAP_CONTENT,1));\r\n            b1.setBackgroundColor(Color.BLUE);\r\n            b1.setTextColor(Color.WHITE);\r\n            b1.setOnClickListener((view)->{\r\n                Toast.makeText(getContext(),\"Order Confirm\",Toast.LENGTH_SHORT).show();\r\n                db.changeStatus(orderid,\"Confirmed\");\r\n                MediMartUtils.loadwithoutHistoryFragment(getActivity(),new OrderFragment());\r\n            });\r\n            Button b2=new Button(getContext())  ;\r\n            b2.setText(\"Cancel Order\");\r\n            b2.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                    ViewGroup.LayoutParams.WRAP_CONTENT,1));\r\n            b2.setBackgroundColor(Color.RED);\r\n            b2.setTextColor(Color.WHITE);\r\n            b2.setOnClickListener((view)->{\r\n                db.changeStatus(orderid,\"Cancelled due to Out of Stock\");\r\n                Toast.makeText(getContext(),\"Order Cancelled\",Toast.LENGTH_SHORT).show();\r\n                MediMartUtils.loadwithoutHistoryFragment(getActivity(),new OrderFragment());\r\n            });\r\n            ll.addView(b1);\r\n            ll.addView(b2);\r\n        }\r\n        else{\r\n            TextView tv=new TextView(getContext());\r\n            tv.setLayoutParams(\r\n                    new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,\r\n                            ViewGroup.LayoutParams.WRAP_CONTENT,1));\r\n            tv.setText(\"Order Status\"+status);\r\n            tv.setTextAlignment(View.TEXT_ALIGNMENT_CENTER);\r\n            tv.setPadding(10,10,10,10);\r\n            tv.setTextColor(Color.BLACK);\r\n            tv.setTextSize(16);\r\n            ll.addView(tv);\r\n            }\r\n        lv.setAdapter(adp);\r\n        return vv;\r\n        }\r\n\r\n        class CustomAdapter extends BaseAdapter{\r\n\r\n        private Cursor c;\r\n\r\n        private  CustomAdapter(Cursor c)\r\n        {\r\n            this.c=c;\r\n        }\r\n            @Override\r\n            public int getCount() {\r\n                return c.getCount();\r\n            }\r\n\r\n            @Override\r\n            public Object getItem(int position) {\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public long getItemId(int position) {\r\n                return 0;\r\n            }\r\n\r\n            @Override\r\n            public View getView(int position, View convertView, ViewGroup parent) {\r\n                View vv =getLayoutInflater().inflate(R.layout.inner_lv_item,parent,false);\r\n                TextView tv1=vv.findViewById(R.id.textView19);\r\n                TextView tv2=vv.findViewById(R.id.textView20);\r\n                TextView tv3=vv.findViewById(R.id.textView29);\r\n                c.moveToNext();\r\n                String pname=c.getString(2);\r\n                tv1.setText(\"Product: \"+pname);\r\n                tv2.setText(\"Qty\"+c.getString(3));\r\n                tv3.setText(\"Price Rs:\"+getPrice(pname));\r\n                return vv;\r\n            }\r\n            private int getPrice(String pname)\r\n            {\r\n                for(Product p :SplashScreen.plist)\r\n                {\r\n                    if(p.getPname().equals(pname))\r\n                    {\r\n                        return p.getPrice();\r\n                    }\r\n                }\r\n                return 0;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/tutlane/afinal/OrderDetailFragment.java b/app/src/main/java/com/tutlane/afinal/OrderDetailFragment.java
--- a/app/src/main/java/com/tutlane/afinal/OrderDetailFragment.java	
+++ b/app/src/main/java/com/tutlane/afinal/OrderDetailFragment.java	
@@ -33,7 +33,7 @@
     @Nullable
     @Override
     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
-        View vv =inflater(R.layout.fragment_order_details,container,false);
+        View vv = inflater(R.layout.fragment_order_details,container,false);
         lv=vv.findViewById(R.id.lvsub);
         db=new MediMartDbHelper(getContext());
         tv=vv.findViewById(R.id.textview30);
Index: app/src/main/res/layout/cart_item_layout.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:layout_margin=\"6dp\"\r\n    app:cardCornerRadius=\"4dp\"\r\n    app:cardElevation=\"4dp\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n        \r\n        <TextView\r\n            android:id=\"@+id/tvcpname\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:padding=\"5sp\"\r\n            android:text=\"Tên Sản Phẩm\"\r\n            android:textColor=\"#000\"\r\n            android:textSize=\"14dp\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/tvcqty\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvcprice\"\r\n            android:layout_width=\"80dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"5sp\"\r\n            android:text=\"Giá\"\r\n            android:textAlignment=\"viewStart\"\r\n            android:textColor=\"#000\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/tvcpname\"/>\r\n\r\n        <TextView\r\n            android:layout_width=\"60dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"8dp\"\r\n            android:padding=\"5sp\"\r\n            android:text=\"Qty\"\r\n            android:textAlignment=\"textEnd\"\r\n            android:textColor=\"#000\"\r\n            android:textSize=\"14dp\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/tvcamt\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/tvcpname\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvcamt\"\r\n            android:layout_width=\"100dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"8dp\"\r\n            android:padding=\"5sp\"\r\n            android:text=\"Số Lượng\"\r\n            android:textAlignment=\"textEnd\"\r\n            android:textColor=\"#000\"\r\n            android:textSize=\"14dp\"\r\n            app:layout_constraintEnd_toStartOf=\"parent\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/tvcqty\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"/>\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n</androidx.cardview.widget.CardView>
===================================================================
diff --git a/app/src/main/res/layout/cart_item_layout.xml b/app/src/main/res/layout/cart_item_layout.xml
--- a/app/src/main/res/layout/cart_item_layout.xml	
+++ b/app/src/main/res/layout/cart_item_layout.xml	
@@ -39,6 +39,7 @@
             app:layout_constraintTop_toBottomOf="@+id/tvcpname"/>
 
         <TextView
+            android:id="@+id/tvcqty"
             android:layout_width="60dp"
             android:layout_height="wrap_content"
             android:layout_marginEnd="8dp"
@@ -49,7 +50,7 @@
             android:textSize="14dp"
             app:layout_constraintEnd_toStartOf="@+id/tvcamt"
             app:layout_constraintStart_toEndOf="@+id/tvcpname"
-            app:layout_constraintTop_toTopOf="parent"/>
+            app:layout_constraintTop_toTopOf="parent" />
 
         <TextView
             android:id="@+id/tvcamt"
diff --git a/app/src/main/res/layout/fragment_cartlist.xml b/app/src/main/res/layout/fragment_catlist.xml
rename from app/src/main/res/layout/fragment_cartlist.xml
rename to app/src/main/res/layout/fragment_catlist.xml
